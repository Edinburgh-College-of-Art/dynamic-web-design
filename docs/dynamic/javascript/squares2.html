<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Bits of javascript</title>
<script type="text/javascript">
	
	var size = 100;
	var opacity = 1;
	
	function create(targetobj, togglerandom){
		var readthis = document.getElementById(targetobj);
		var newbox = document.createElement("div");
		readthis.appendChild(newbox);
		
		var parentstyle = document.getElementById("dom");
		
		randColor();
		if(togglerandom){
			var sizer = Math.floor(Math.random() *100);
		}
		else{
			var sizer = 100;
		}
		
		var style = "background-color:rgb("+newcolor+"); width:"+sizer+"px; height: 100px; float: left; margin: 10px;";
		newbox.setAttribute("style", style);
		newbox.setAttribute("onclick", "fadethis(this)");
		newbox.setAttribute("onmouseover", "newColor(this)");

		//alert(newpara.getAttribute("style"));
	}
	
	function randColor(){
		var red = Math.floor(Math.random() * 255);
  		var green = Math.floor(Math.random() * 255);
  		var blue = Math.floor(Math.random() * 255);
		newcolor = red+','+green+','+blue;
		return(newcolor);
	}
	
	function newColor(target){
		randColor();
		currentstyle = target.getAttribute("style");
		target.style.backgroundColor="rgb("+newcolor+");";
	}
	
	function fade(targetobj){
		t=setTimeout("fade(targetobj)",100);
		opacity -= 0.1;
		if(opacity <= 0.05){
			opacity = -0.1;
			targetobj.setAttribute("style", style);
			clearTimeout(t);
			alert("gone");
		}
		
		currentstyle = targetobj.getAttribute("style");
		var style = currentstyle +"filter:alpha(opacity="+(opacity*100)+"); -moz-opacity:"+opacity+"; opacity: "+opacity+";";
		targetobj.setAttribute("style", style);
	}
	
	function resetopacity(){
		opacity = 1.0;
	}
	
	function fadethis(currentcube){
		resetopacity();
		fade(currentcube);
	}
</script>


</head>

<body>


<div id="dom">
	  <ul>
        <li><a href="#" onclick="create('dom', false); return false;">Square</a></li>
        <li><a href="#" onclick="create('dom', true); return false;">Random Rectangle</a></li>
        <li><a href="">Clear all</a>
    </ul>
</div>

</body>
</html>
