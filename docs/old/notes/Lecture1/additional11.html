<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Lecture 1 additional</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<style type="text/css">
<!--
.style1 {font-family: "Courier New", Courier, mono}
-->
</style>
</head>

<body>
<h2>Additional information on local use of ColdFusion and MySQL</h2>
<h3><a name="CFconnect" id="CFconnect"></a>Connecting to the EUCS (IS) ColdFusion
  server</h3>
<p>The overall picture of the situation is like this:</p>
<p><img src="diagram.jpg" width="761" height="507" /></p>
<p>You can connect to
    the CF server very easily from a Mac OS X machine, by using the Samba protocol
    (often used for connecting to Windows machines). <strong>Note
    that you will have to be on the University network or the VPN</strong> -- see the foot of this page for
  details. Type Command-K (AppleKey-K) in the Finder, to get the Connect
  to Server dialogue. Then enter (or choose from the menu if it's already there)
  the following URL:</p>
<p>smb://webdbdev.ucs.ed.ac.uk/ddm1011</p>
<p>-- this should bring up a box in which you need to enter your University Universal
  Username (UUN) and password (the same as you use for accessing SMS mail etc.).
  You should then, perhaps after some delay, simply get a normal-looking Finder
  window called <em>ddm1011</em>, with a lot of other folders in it, including
  one named with your UUN. There is also one called <em>test</em> (containing
  the examples in these notes, among other things). You will be able to read
  the material in most of these folders, but you should only be able to write,
  or create new folders and files, in your own folder. Feel free to create anything
  you like in your own folder and experiment with copying and editing CF templates
  in it. Any CF template that you put here, if its filename ends in &quot;.cfm&quot;,
  should be interpreted by the ColdFusion server as described in these notes.</p>
<p>Please don't create files anywhere else on this server, even if
    it turns out that you can. Please also note that we do not have unlimited
  disc space available on this server (and in fact you have a limited quota allocation),
  so if you have many or large images etc. in your pages it will be best to keep
  these on our DDM server and include them in your pages by using their URLs.</p>
<p>The top-level folder you get to through this process is visible on the web
  as <a href="http://webdbdev.ucs.ed.ac.uk/ddm/2007/">http://webdbdev.ucs.ed.ac.uk/ddm/1011/</a> .
  Your folder, and other folders you create in it, will be visible at a URL created
  by extending this one in the obvious way. Please note that these URLs are currently
  visible to the world, so be aware of this and consider issues of copyright
  and suitability when placing material on this server. </p>
<h3><a name="MySQL" id="MySQL"></a>Using MySQL</h3>
<p>MySQL is a powerful database system which one traditionally interacts with
  on a UNIX command-line, entirely by writing SQL commands. This is hugely flexible,
  but not very attractive. Luckily there is  a very neat freeware graphical
  interface that runs under OS X and generates the SQL commands for you. MySQL
  is also server-based, which means that for our purposes we will always be using
  databases provided by the MySQL server running on our own server, duchamps. </p>
<p>To access the databases,
    use the application <em>SequelPro</em>.
    (See <a href="http://www.sequelpro.com/" target="_blank">http://www.sequelpro.com/</a> for
    details.) When it's launched, type Command-N (or choose New from the File
    menu) to create a new connection. A dialogue box asks for various things
    -- enter the following:</p>
<p>Host: bacon.caad.ed.ac.uk<br />
User: mscuser1011<br />
Password: &lt;will be given to you more securely than by publication here ...&gt; </p>
<p>(ignore the other fields at this stage). There may be a short wait while the
  connection is made. The title bar of the window will indicate the connection
  once you have one. The interface will look rather like this (click for full-size
  image) -- though the database is actually called <em>mscdb1011</em> this year:</p>
<p><a href="mySQLscreen.png" target="_blank"><img src="mySQLscreen.png" width="667" height="555" border="0" /></a></p>
<p>The console at the bottom can be displayed with the buttons at the top left.
  It shows you the SQL commands that are being sent to the server, and you'll
  see that some of these are similar to the ones you have to write in ColdFusion
  -- you can write other specific queries and test out what they do by using
  the &quot;Custom Query&quot; tab. The Databases list at the upper left shows
  you the databases that the server can serve. However, you do not have privileges
  to access all of these. By convention, everyone can access the database <em>test</em>. </p>
<p>You should also be able to access
  the database called <em>mscdb1011</em>,
  and you should have full privileges to create, change and delete tables in
  it. <strong>Be
  very careful with this!</strong> <strong>If
  you change or delete something, there is NO WAY OF UNDOING IT!</strong> (If
  you are considering a major change to a table that might be important, ALWAYS
  make a duplicate copy of it first, just in case.)</p>
<p>You
  can create your own tables, or tables for use by groups. When you've created
  a table, you have to add specifications of fields one at a time, in the &quot;Structure&quot; view
  as shown above (similar e.g. to the &quot;Design&quot; view in MS Access).
  You can then change to the &quot;Content&quot; view and add and edit the table
  rows (much as in the &quot;Datasheet&quot;
  view in Access or similar things in FileMaker etc.).</p>
<p>You can also define keys
  and relationships between the tables. Consult the SequelPro Help information,
  and a reference text on SQL for further information. The very good database
  chapter in the SAMS ColdFusion book (called &quot;Day 4&quot;) assumes you
  are using MS Access, but the ideas are much the same. There is also (extremely
  extensive) <a href="http://dev.mysql.com/doc/refman/4.1/en/index.html" target="_blank">online
  MySQL documentation</a>. </p>
<p>Remember that in the database <em>mscdb1011</em>, you
  are all in effect the same user, so you can all read and change each other's
  tables &mdash; do please therefore <strong><em>exercise appropriate
  care and respect in your use of this database</em></strong>. Later, we can
  set up databases with other kinds of permissions if needed. </p>
<p>We assume that for our purposes here, we will mostly only need to create tables
  and specify the types for all the fields. That is, we will only need to create
  the Structure (or Design) of the database. Then content will normally be added
  and manipulated via ColdFusion, although it is also possible to import data
  from files, even e.g. data files exported from other databases created in
  Access or Excel etc. </p>
<p>Notice that MySQL data fields can contain all kinds of
    things, including image data; but usually we will want to keep images as
  files on a web server, and simply include the URL in the database. </p>
<h3><a name="CFdata" id="CFdata"></a>Accessing MySQL from ColdFusion</h3>
<p>You can only access datasources in CF if these have been registered by the
  CF server administrators. We  have one that is set up for the mscdb1011 mentioned
  above. <strong>The datasource name is &quot;mscdb1011&quot;: note that this
  can be<em>different</em> from the name of the database itself, but in this
  case it's the same.</strong> If
  you have created, say, a table in there called &quot;flowers&quot; with fields
  such as &quot;name&quot;, &quot;colour&quot;, &quot;height&quot; and &quot;smell&quot;,
  then you can create CF queries in your templates, such as the following:</p>
<p class="style1">&lt;CFQUERY NAME=&quot;FlowerData&quot; DATASOURCE=&quot;mscdb1011&quot;&gt;<br />
  SELECT name, colour, height, smell<br />
  FROM flowers<br />
&lt;/CFQUERY&gt;</p>
<p>-- which then you can display in a table etc., or styled with CSS, in any
  way you like.</p>
<h3>Restrictions on remote connections</h3>
<p>Although connecting from machines in the studio should
  be fine, you'll find that you cannot connect via Samba to the IS CF server,
  nor to our MySQL server, from machines outside the University domain
  (e.g. if you are using a third-party ISP from home). This is because we
  have firewalls for security purposes. However, you can use the University's
  Virtual Private Network (VPN) &mdash; once you are connected to the VPN, your
  machine appears to be within the University domain, and everything is OK. See <a href="http://www.ucs.ed.ac.uk/nsd/access/vpnservice.html" target="_blank">http://www.ucs.ed.ac.uk/nsd/access/vpnservice.html</a>  for
  details of how to do this. The same applies if you are connecting via wireless,
  in the usual way (so if you are used to connecting using wireless via the VPN,
  this should all work the same as usual). </p>
<p>&nbsp; </p>
<p>&nbsp;</p>
</body>
</html>
