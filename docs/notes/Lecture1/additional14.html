<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Lectures 1-2 additional</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<style type="text/css">
<!--
.style1 {font-family: "Courier New", Courier, mono}
-->
</style>
</head>

<body>
<h2>Additional information on local use of PHP and MySQL</h2>
<h3><a name="CFconnect" id="CFconnect"></a>Connecting to the PHP
  server</h3>
<p>The overall picture of the situation is like this:</p>
<p><img src="diagramPHP.png" width="763" height="576" /></p>
<p>We have our own PHP server, which is called <em>playground</em> and is administered by Geoff Lee. You can connect to
    the PHP server very easily from a Mac OS machine, by using the Samba protocol. <strong>Note
    that you will have to be on the University network or the VPN</strong> -- see the foot of this page for
  details. Type Command-K (AppleKey-K) in the Finder, to get the Connect
  to Server dialogue. Then enter (or choose from the menu if it's already there)
  the following URL:</p>
<p><a href="smb://playground.eca.ed.ac.uk/playground_people">smb://playground.eca.ed.ac.uk/playground_people</a></p>
<p>-- this should bring up a box in which you need to enter your University Universal
  Username (UUN) and password (the same as you use for accessing SMS mail etc.).
  You should then, perhaps after some delay, simply get a normal-looking Finder
  window called <em>playground_people</em>, with a lot of other folders in it, including
  one named with your UUN. 
  <!--
  There is also one called <em>test</em> (containing
  the examples in these notes, among other things). 
  -->
  You  should only be able to read, write,
  or create new folders and files, in your own folder. You will find a folder inside your own folder, called <em>html</em> -- anything placed in here will be visible to the web (but not anything placed outside it). Feel free to create anything
  you like in your own folder and experiment with copying and editing PHP templates
  in it. Any PHP template that you put here, if its filename ends in &quot;.php&quot;,
  should be interpreted by the PHP server as described in these notes.</p>
<p><strong>Note: </strong>For further instructions on how to connect from Windows machines, and how
  you can alternatively connect using SFTP, please see 
  <a href="https://www.wiki.ed.ac.uk/display/ECAIT/Experimental+web+server">the ECA Computing Wiki page here</a>. You will always
  need to be on the VPN to connect to a database, but you don't need to use the VPN to work with your files using SFTP.</p>
<p>All information about <em>playground</em> given here should be consistent with details that you can also find on the <a href="https://www.wiki.ed.ac.uk/pages/viewpage.action?spaceKey=ECAIT&amp;title=Experimental+web+server" target="_blank">ECA computing wiki:</a> if there are any discrepancies, the information on the wiki is probably correct.</p>
<p>Please don't create files anywhere else on this server, even if
    it turns out that you can. Please also note that you do not have unlimited
  disc space available on this server (and in fact you have a limited quota allocation),
  so if you have many or large images etc. in your pages it's possible that the space will fill up. If this happens,<a href="mailto:J.Lee@ed.ac.uk"> contact me</a>.</p>
<p>The top-level folder you get to through this process is visible on the web
  as <a href="http://playground.eca.ed.ac.uk/">http://playground.eca.ed.ac.uk/</a> .
  Your <em>html</em> folder, and other folders you create in it, will be visible at a URL created
  by extending this one by using your UUN with a tilde character (~) in front of it, as for example in my case: <a href="http://playground.eca.ed.ac.uk/~jlee">http://playground..ed.ac.uk/~jlee</a>. The &quot;html&quot; part does <em>not</em> appear in the URL. Please note that these URLs are currently
  visible to the world, so be aware of this and consider issues of copyright
  and suitability when placing material on this server. </p>
<h3><a name="MySQL" id="MySQL"></a>Using MySQL</h3>
<p>MySQL is a powerful database system traditionally used via a UNIX command-line, entirely by writing SQL commands. This is hugely flexible,
  but not very attractive. Luckily there is  a very neat freeware graphical
  interface that runs under OS X and generates the SQL commands for you. MySQL
  is also server-based, which means that for our purposes we will always be using
  databases provided by the MySQL server running on our own server, <em>playground</em>. </p>
<p>To access the databases,
    use the application <em><strong>SequelPro</strong></em>.
    (See <a href="http://www.sequelpro.com/" target="_blank">http://www.sequelpro.com/</a> for
    details.) When it's launched, type Command-N (or choose New from the File
    menu) to create a new connection. A dialogue box asks for various things
-- you need only enter the host, user, password and database. The host is <em>playground.eca.ed.ac.uk</em>. In your folder on <em>playground</em>, you should have a file called <em>database_info.txt</em>: this tells you the username and password to use. Your database is named with your username, so just enter that again there.</p>
<p>[If you are using Windows, or some flavour of Linux, etc., then you will not have <em>SequelPro</em>, but you have several similar applications available. Even on Windows, some of these are free. I don't have specific recommendations. If you can find nothing else, a default option on any platform is <a href="https://dev.mysql.com/downloads/workbench/" target="_blank">MySQL Workbench</a> from the MySQL development team, or if you install <a href="https://www.mamp.info/en/" target="_blank">MAMP</a>/<a href="https://bitnami.com/stack/lamp/installer" target="_blank">LAMP</a>/<a href="http://ampps.com/wamp" target="_blank">WAMP</a> you will get <em>PHPMyAdmin</em>, which is a little clunky but effective.]</p>
<p> There may be a short wait while the
  connection is made. The title bar of the window will indicate the connection
  once you have one. The interface will look rather like this (click for full-size
  image) -- though the database name and server will  be different:</p>
<p><a href="mySQLscreen.png" target="_blank"><img src="mySQLscreen.png" width="667" height="555" border="0" /></a></p>
<p>The console at the bottom can be displayed with the buttons at the top left.
  It shows you the SQL commands that are being sent to the server, and you'll
  see that some of these are similar to the ones you have to write in PHP
  -- you can write other specific queries and test out what they do by using
  the &quot;Custom Query&quot; tab. The Databases list at the upper left shows
  you the databases that the server can serve. However, you do not have privileges
  to access all of these. By convention, everyone can access the database <em>test</em>. </p>
<p>You should have full privileges to create, change and delete tables in
  your database. <strong>Be
  very careful with this!</strong> <strong>If
  you change or delete something, there is NO WAY OF UNDOING IT!</strong> (If
  you are considering a major change to a table that might be important, ALWAYS
  make a duplicate copy of it first, just in case.)</p>
<p>You
  can create new tables, as you wish. When you've created
  a table, you have to add specifications of fields one at a time, in the &quot;Structure&quot; view
  as shown above (similar e.g. to the &quot;Design&quot; view in MS Access).
  You can then change to the &quot;Content&quot; view and add and edit the table
  rows (much as in the &quot;Datasheet&quot;
  view in Access or similar things in FileMaker etc.).</p>
<p>You can also define keys
  and relationships between the tables. Consult the SequelPro Help information,
  and a reference text on SQL for further information. There is also (extremely
  extensive) <a href="http://dev.mysql.com/doc/refman/4.1/en/index.html" target="_blank">online
  MySQL documentation</a>.</p>
<p>We assume that for our purposes here, we will mostly only need to create tables
  and specify the types for all the fields. That is, we will only need to create
  the Structure (or Design) of the database. Then content will normally be added
  and manipulated via PHP. If necessary, however, it is also possible to import data
  from files, even e.g. data files exported from other databases created in
  Access or Excel etc. </p>
<p>Notice that MySQL data fields can contain all kinds of
    things, including image data; but usually we will want to keep images as
  files on a web server, and simply include the URL in the database. </p>
<h3><a name="CFdata" id="CFdata"></a>Accessing MySQL from PHP</h3>
<p>We will be doing this using the Fat Free Framework. See the lecture notes for details. <strong><em>Do NOT use the simpler and older MySQL extension, or even MySQLi, as used e.g. by w3schools</em></strong>. PHP is extremely vulnerable to attacks and exploits by all kinds of hackers:<em> be afraid, be very afraid!</em> Do not use code of unknown quality acquired from random sources. There are many sources of good, tested and reliable PHP code: always use these. </p>
<p>The consequences of people hacking a PHP server can be severe. It can be crashed, have databases destroyed,  used to attack and seriously damage other servers, or send torrents of junk email. The University will shut down any server that seems to have been hacked. Luckily, <em>playground</em> is fairly well insulated from other servers and mostly will cause problems only for you and your fellow students if it is damaged; but that's bad enough! And if you break it, you will have to contend with the wrath of Geoff, who will have to reinstate it. We expect that there will be genuine accidents, and we're prepared for them; but there is no excuse for just being careless.</p>
<h3>Restrictions on remote connections</h3>
<p>Although connecting from machines in the studio should
  be fine, you'll find that you cannot connect via Samba to the playground server,
  nor to the MySQL server, from machines outside the University domain
  (e.g. if you are using a third-party ISP from home). This is because we
  have firewalls for security purposes. However, you can use the University's
  Virtual Private Network (VPN) &mdash; once you are connected to the VPN, your
  machine appears to be within the University domain, and everything is OK. See <a href="http://www.ed.ac.uk/schools-departments/information-services/computing/desktop-personal/vpn" target="_blank">http://www.ed.ac.uk/schools-departments/information-services/computing/desktop-personal/vpn</a>  for
  details of how to do this. The same applies if you are connecting via wireless,
  in the usual way (so if you are used to connecting using wireless via the VPN,
  this should all work the same as usual). </p>
<p>&nbsp; </p>
<p>&nbsp;</p>
</body>
</html>
