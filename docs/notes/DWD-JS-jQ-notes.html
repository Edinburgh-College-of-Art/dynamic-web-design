<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<style type="text/css">
<!--
p {  font-family: Arial, Helvetica, sans-serif; font-size: 16px}
code {  font-family: "Courier New", Courier, mono; font-size: 14px}
.style2 {
	font-family: "Courier New", Courier, mono;
	font-size: 15px;
}
.style3 {color: #990000}
.redCode {
	color: #F00;
}
.blueCode {
	font-family: "Courier New", Courier, mono;
	font-size: 15px;
	color: #00F;
}
.greenCode {
	color: #0C6;
}
.purpleCode {
	color: #F0F;
}
.yellowCode {
	color: #F90;
}
-->
</style>

<title>Javascript and jQuery notes</title>
</head>

<body>
<h1>Dynamic Web Design</h1>
<h2>Javascript and jQuery</h2>
<p>In these notes I assume familiarity with the basic syntax etc. of javascript. It's very much the same as Actionscript (though with some important differences that we'll mention) and even very similar to PHP (but again with some important differences that we'll mention). I will refer heavily to some external resources such as the w3schools pages, which on these topics are very good, and their &quot;Try it yourself&quot; feature is invaluable for experimenting. </p>
<p>Do always experiment! Try different things; try things you think will work and things you think won't – try to find out why they don't. You can't break anything. Experiment <em>until you understand</em>. If you can't see why something does or doesn't work, do ask me or Jules (or search e.g. <a href="http://stackoverflow.com">http://stackoverflow.com</a>).</p>
<p>I focus here on objects and functions because these are especially important in jQuery.</p>
<h3>One thing to note</h3>
<p>It's very often useful to get output from your code to see what it's doing. You don't want to use <em>document.write()</em>, or similar, to output this to the web page. Instead, <em>console.log()</em> will allow you to write messages to the javascript error console, available in all browsers, often from the &quot;Develop&quot; or &quot;Tools&quot; menu. <em>console.log()</em> takes up to two arguments:</p>
<p class="style2">var x=327;<br />
console.log(&quot;This message will be followed by the value of the next argument: &quot;, x);</p>
<p>does what you would expect. Use it often; it's extremely valuable.</p>
<h3>Javascript and Objects</h3>
<p>Almost evertything in javascript is, or can be treated as, an <em>object</em>. </p>
<p>Objects have the usual kind of &quot;dot-based&quot; syntax, e.g. in <em>document.getElementById(&quot;box1&quot;)</em> there is an object, <em>document</em>, which has a method, <em>getElementById()</em>, which in this case is called with the argument, a string, <em>&quot;box1&quot;</em>. </p>
<p>The document object has many properties and methods (<a href="http://www.w3schools.com/jsref/dom_obj_document.asp">http://www.w3schools.com/jsref/dom_obj_document.asp</a>), as do many of the DOM objects. </p>
<p>First, here are some excellent notes by Mike Greer, a former DDM graduate and tutor with us for several years: <a href="https://playground.eca.ed.ac.uk/~jlee/test/javascript/">https://playground.eca.ed.ac.uk/~jlee/test/javascript/</a>. These show the basic relationship between javascript and the HTML Document Object Model (DOM), which is central to everything that follows.</p>
<p> The document is just one object among many, and you can create your own. There are some good object examples at w3schools:<a href="http://www.w3schools.com/js/js_obj_intro.asp"> http://www.w3schools.com/js/js_obj_intro.asp</a> and<a href="http://www.w3schools.com/js/js_objects.asp"> http://www.w3schools.com/js/js_objects.asp</a></p>
<p>Note that defining objects using functions is powerful and flexible, but it's different from defining classes in e.g. Actionscript, or even PHP. Don't get these confused. The way you will use objects once you have them is very similar, but the way of defining them is not.</p>
<h3>Javascript and Functions</h3>
<p>Functions in javascript are much as you will have seen in Actionscript and/or PHP: <a href="http://www.w3schools.com/js/js_functions.asp">http://www.w3schools.com/js/js_functions.asp</a></p>
<p>But also, in javascript, functions can be <em>anonymous</em> – you can create a function, e.g. as a value of a variable, without giving it a name directly. This is often used to add methods to objects. Consider the example from <a href="http://www.w3schools.com/js/tryit.asp?filename=tryjs_create_object3">http://www.w3schools.com/js/tryit.asp?filename=tryjs_create_object3</a>: in this case, there is code that says:</p>
<p><span class="style2">this.changeName=changeName;<br />
  function changeName(name)<br />
  {<br />
  this.lastname=name;<br />
  }</span><br />
</p>
<p>What's happening here is that the variable changeName is being given the function that's also called changeName as a value. But we could equally well write the code like this:</p>
<p><span class="style2">this.changeName=function (name)<br />
  {<br />
  this.lastname=name;<br />
  }</span><br />
</p>
<p>(Try it and see!) This is the way you will see it more often done. The code is more compact, and (once you get used to it) easier to work with. </p>
<p>But also, anonymous functions like this can be e.g. given as arguments to other functions. Suppose we wanted to specify the changeName function as a <em>parameter</em> of the object; then we could rewrite this example along the lines:</p>
<p class="style2">function person(firstname,lastname,age,eyecolor, <span class="blueCode">changefunc</span>)<br />
  {<br />
  this.firstname=firstname;<br />
  this.lastname=lastname;<br />
  this.age=age;<br />
  this.eyecolor=eyecolor;<br />
  <br />
  this.changeName=<span class="blueCode">changefunc</span>;<br />
}</p>
<p class="style2">myMother=new person(&quot;Sally&quot;,&quot;Rally&quot;,48,&quot;green&quot;, <span class="redCode">function(n){this.lastname=n}</span>);<br />
  myMother.changeName(&quot;Doe&quot;);<br />
  document.write(myMother.lastname);</p>
<p>So here, where we created the new person, we also specified the function for changing their name. The code in red is just an anonymous function definition, fropped in as a parameter to another function call. This isn't of much practical use here, but could be in a case where people's names might be changed in different ways, or something like that.</p>
<p>Play with some of these examples, and try out these ideas. In the lecture, we modified the example to  something like:</p>
<p class="style2">function person(firstname,lastname,age,eyecolor, <span class="blueCode">changefunc</span>)<br />
  {<br />
  this.firstname=firstname;<br />
  this.lastname=lastname;<br />
  this.age=age;<br />
  this.eyecolor=eyecolor;<br />
  <br />
  this.changeName=<span class="blueCode">changefunc</span>;<br />
  }</p>
<p class="style2">myMother=new person(&quot;Sally&quot;,&quot;Rally&quot;,48,&quot;green&quot;, <span class="redCode">function(n){this.lastname=n}</span>);<br />
  myFather=new person(&quot;George&quot;,&quot;Doe&quot;,48,&quot;green&quot;, <span class="greenCode">function(n){this.firstname=n}</span>);  <br />
  myMother.changeName(&quot;Doe&quot;);<br />
  myFather.changeName(&quot;Fred&quot;);  <br />
document.write(myMother.lastname);<br />
document.write(myFather.firstname);</p>
<p>-- which  outputs &quot;DoeFred&quot;. Note that the functions supplied as the final parameter to the object are <em>different</em>: one changes the lastname, the other the firstname.</p>
<p>The syntax that results here is something you will see a lot of in javascript code – especially once you start to tangle with jQuery ...</p>
<h3>jQuery</h3>
<p>jQuery is just one among a number of libraries or frameworks avaialble for javascript, but it's the most widely used and I've not come across a compelling reason to use another one. There is excellent introductory material at <a href="http://www.w3schools.com/jquery/default.asp">http://www.w3schools.com/jquery/default.asp</a></p>
<p>One of the most difficult things about jQuery is the syntax, even though in reality it's fairly simple: <a href="http://www.w3schools.com/jquery/jquery_syntax.asp">http://www.w3schools.com/jquery/jquery_syntax.asp</a></p>
<p>Note that the &quot;$&quot; character is just the name of a function, but a crucially important one. In particular, it has nothing to do with variables and is not related to the &quot;$&quot; character as used in PHP!</p>
<p>It's really useful to get a clear idea of the range of selectors available: <a href="http://www.w3schools.com/jquery/jquery_selectors.asp">http://www.w3schools.com/jquery/jquery_selectors.asp</a> (the &quot;first&quot;, &quot;even&quot;, &quot;odd&quot; etc. can be especially useful).</p>
<p>(The example of how to use the first-child selector, for instance, has a good example of embedded anonymous functions as commonly used in jQuery: <a href="http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_sel_ullifirstchild">http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_sel_ullifirstchild</a>)</p>
<p>Again, anonymous functions are the usual approach to defining mthods that wil be called in response to interactive events: <a href="http://www.w3schools.com/jquery/jquery_events.asp">http://www.w3schools.com/jquery/jquery_events.asp</a></p>
<p>Here's an example of a small application that uses jQuery in an admittedly rather pointless way, but it shows up some of the techniques (<a href="testJQsimple.html">testJQsimple.html</a>) – the code is included here, but remember that as often with javascript you can also see it (formatted better than here) simply by viewing the page source [<a href="#footnote">footnote</a>]:</p>
<p class="style2">&lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js&quot;&gt;<br />
  // A silly example that displays some text such that the mouse running over the text causes words to change colour<br />
  // and displays in another div the current word and its position in the text.  Styling is minimal.<br />
&lt;/script&gt;</p>
<p class="style2">&lt;style&gt;<br />
  #maindiv	{<br />
  color: blue;<br />
  }</p>
<p class="style2">#div2	{<br />
  margin-top: 50px;<br />
  margin-left: 50px;<br />
  color: green<br />
  }</p>
<p class="style2">#wddiv, #posdiv	{<br />
  color: red;<br />
  }<br />
  &lt;/style&gt;</p>
<p class="style2">&lt;script&gt;</p>
<p class="blueCode">function setupWords() {<br />
  var words = $(&quot;#wordarea&quot;).val();	// Gets the value (text content) of the textarea</p>
<p class="blueCode"> // Here we split the string of words up into an array of individual words<br />
var wordsArray = words.split(&quot; &quot;);</p>
<p class="blueCode"> // Throw away the words, because we're going to rebuild this string with some added HTML<br />
  words = &quot;&quot;;</p>
<p class="blueCode"> // Loop through the array of words ...<br />
  for (var i=0; i &lt; wordsArray.length; i++ ) {<br />
  // put span tag around each word, including a unique id and class 'word'<br />
  wordsArray[i] = &quot;&lt;span class='word' id='wd&quot;+i+&quot;'&gt;&quot;+wordsArray[i]+&quot;&lt;/span&gt;&quot;;<br />
  // and now stick these back together into a single string again<br />
  words = words+wordsArray[i]+&quot; &quot;;<br />
  }</p>
<p class="blueCode"> // Show the resulting HTML string on the error console, just as a diagnostic<br />
  console.log(&quot;words is &quot;, words);<br />
</p>
<p class="style2"><span class="blueCode"> // Note this is exactly equivalent to:  document.getElementById(&quot;maindiv&quot;).innerHTML=words;<br />
  $(&quot;#maindiv&quot;).html(words);<br />
  <br />
  setupjQ();<br />
  }</span><br />
</p>
<p class="style2">function setupjQ() {<br />
  $(&quot;.word&quot;).mouseenter(function(){	// what to do if the mouse enters one of the span elements (class is word)<br />
  $(this).css(&quot;color&quot;,&quot;red&quot;);		// turn this element, that the mouse has entered, red<br />
  $(&quot;#wddiv&quot;).html($(this).html());	// put the innerHTML of this element (a word) into wddiv<br />
  // Get the id attribute of this element (e.g. &quot;wd27&quot;), take off the first two characters (&quot;wd&quot;),<br />
  // then put the remainder (e.g. &quot;27&quot;) into the innerHTML of posdiv <br />
  $(&quot;#posdiv&quot;).html($(this).attr(&quot;id&quot;).substring(2));<br />
  $(&quot;#div2&quot;).show();		// show div2 element<br />
  });<br />
  <br />
  $(&quot;.word&quot;).mouseleave(function(){	// what to do when the mouse leaves the span element<br />
  $(this).css(&quot;color&quot;,&quot;blue&quot;);<br />
  $(&quot;#div2&quot;).hide();<br />
  }); <br />
  }</p>
<p class="style2">$(document).ready(function(){<br />
  $(&quot;#div2&quot;).hide();		// hide div2 element as soon as document is ready (on page load)<br />
  });<br />
  &lt;/script&gt;</p>
<p class="style2">&lt;!DOCTYPE html&gt;<br />
  &lt;html&gt;<br />
  &lt;head&gt;<br />
  &lt;/head&gt;<br />
  &lt;body&gt;<br />
  &lt;div id=&quot;maindiv&quot;&gt;<br />
  &lt;!-- Textarea containing arbitrary text; the user can paste something else into this textarea if they want --&gt;<br />
  &lt;textarea rows=&quot;10&quot; cols=&quot;70&quot; id=&quot;wordarea&quot;&gt;<br />
  Of course, two SOMs connected in this fashion can learn no more or less than a single SOM would. But the stratification of the SOMs allows for processing to occur at intermediate stages. There are three types of intermediate processing that are relevant to the present discussion: activation decay, activation blurring, and multi-modal layers. Activation decay allows the activation of a given node to decay over time, rather than reset at each time step.<br />
  &lt;/textarea&gt;<br />
  &lt;br /&gt;<br />
  &lt;input type=button onclick=&quot;setupWords()&quot; value=&quot;Setup&quot;&gt;	&lt;!-- Button that will call setupWords() when clicked --&gt;<br />
  &lt;/div&gt;<br />
  &lt;!-- div that will be hidden except when the mouse is over a word in the text --&gt;<br />
  &lt;div id=&quot;div2&quot;&gt;The current word is: &lt;span id=&quot;wddiv&quot;&gt;&lt;/span&gt; at position &lt;span id=&quot;posdiv&quot;&gt;&lt;/span&gt;&lt;/div&gt;<br />
  &lt;/body&gt;<br />
  &lt;/html&gt;</p>
<p><a name="footnote" id="footnote"></a>Footnote: I've subsequently noticed that the remarkable jQuery method <em>$.each()</em> (see <a href="https://api.jquery.com/jQuery.each/">https://api.jquery.com/jQuery.each/</a>) can be usd to implement the <em>setupWords()</em> function above rather more succinctly as:</p>
<p class="style2">function setupWords() {<br />
var words = &quot;&quot;;<br />
$.each($(&quot;#wordarea&quot;).val().split(&quot; &quot;), function (i, word) {<br />
  words += &quot;&lt;span class='word' id='wd&quot;+i+&quot;'&gt;&quot;+word+&quot;&lt;/span&gt; &quot;;<br />
  });<br />
  $(&quot;#maindiv&quot;).html(words);<br />
  <br />
  setupjQ();<br />
}</p>
<p>This does exactly the same thing as the same function (coloured blue) in the code above. It's probably slightly more efficient to run; but perhaps a bit less readable!</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>
